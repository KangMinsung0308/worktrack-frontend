<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>캘린더</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: #00000;
      line-height: 1.5;
      display: flex;
      justify-content: center;
      margin: 0;
      padding: 0;
    }

    .container {
      width: 100%;
      max-width: 375px;
      margin: 0 auto;
      background-color: white;
      min-height: 100vh;
      position: relative;
      overflow-hidden;
      border-left: none;
      border-right: none;
    }

    /* Download Button */
    .download-button {
      position: absolute;
      right: 24px;
      top: 20px;
      width: 24px;
      height: 24px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;
      z-index: 20;
    }

    /* Month Selector */
    .month-selector {
      padding: 0 20px;
      margin-top: 20px;
      margin-bottom: 0;
      position: relative;
    }

    .month-button {
      display: flex;
      align-items: center;
      gap: 6px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;
    }

    .month-text {
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 16px;
      font-weight: 600;
      color: #000;
      letter-spacing: -0.4px;
      line-height: 1.5;
    }

    .month-dropdown {
      position: absolute;
      left: 20px;
      top: 40px;
      background-color: white;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      z-index: 30;
      width: 160px;
      max-height: 300px;
      overflow-y: auto;
      display: none;
    }

    .month-dropdown.visible {
      display: block;
    }

    .month-dropdown-item {
      width: 100%;
      padding: 12px 16px;
      text-align: left;
      background: none;
      border: none;
      cursor: pointer;
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 14px;
      color: #000;
      transition: background-color 0.2s;
    }

    .month-dropdown-item:hover {
      background-color: #f5f5f5;
    }

    .month-dropdown-item.selected {
      background-color: #eeeeee;
    }

    .dropdown-backdrop {
      position: fixed;
      inset: 0;
      z-index: 20;
      display: none;
    }

    .dropdown-backdrop.visible {
      display: block;
    }

    /* Calendar */
    .calendar {
      width: 100%;
    }

    .calendar-weekdays {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      width: 100%;
    }

    .weekday {
      background-color: white;
      height: 85px;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      padding-bottom: 12px;
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 11px;
      font-weight: 500;
      color: #000;
      line-height: 1.5;
      letter-spacing: -0.25px;
    }

    .weekday.sunday {
      color: #eb4335;
    }

    .weekday.saturday {
      color: #4285f4;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      width: 100%;
    }

    .calendar-day {
      height: 85px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: flex-start;
      padding-top: 2px;
      padding-left: 4px;
      cursor: pointer;
      position: relative;
      background-color: white;
      transition: background-color 0.2s;
    }

    .calendar-day:hover {
      background-color: #f5f5f5;
    }

    .calendar-day.empty {
      cursor: default;
      pointer-events: none;
    }

    .calendar-day.selected {
      background-color: #eeeeee;
    }

    .calendar-day.disabled {
      cursor: default;
      pointer-events: none;
    }

    .day-number {
      font-family: 'Inter', sans-serif;
      font-size: 11px;
      font-weight: 500;
      color: #000;
      line-height: 1.5;
      letter-spacing: -0.25px;
      margin-top: 0;
    }

    .calendar-day.sunday .day-number {
      color: #eb4335;
    }

    .calendar-day.saturday .day-number {
      color: #4285f4;
    }

    .calendar-day.holiday .day-number {
      color: #eb4335;
    }

    .work-badge {
      background-color: #88b3f8;
      color: white;
      font-family: 'Inter', sans-serif;
      font-size: 11px;
      font-weight: 500;
      padding: 0 2px;
      height: 24px;
      line-height: 24px;
      border-radius: 4px;
      margin-top: 8px;
      letter-spacing: -0.25px;
      width: calc(100% + 4px);
      margin-left: -4px;
      text-align: center;
    }

    .vacation-badge {
      background-color: #ff9999;
      color: white;
      font-family: 'Inter', sans-serif;
      font-size: 11px;
      font-weight: 500;
      padding: 0 2px;
      height: 24px;
      line-height: 24px;
      border-radius: 4px;
      margin-top: 8px;
      letter-spacing: -0.25px;
      width: calc(100% + 4px);
      margin-left: -4px;
      text-align: center;
      margin-bottom: 40px;
    }

    /* Navigation Buttons */
    .nav-container {
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 375px;
      height: 56px;
      z-index: 25;
      padding-bottom: 20px;
    }

    .nav-wrapper {
      position: relative;
      width: 100%;
      height: 56px;
    }

    /* Background bars */
    .bg-bar {
      position: absolute;
      background-color: #eeeeee;
      height: 56px;
      width: 125px;
      top: 0;
    }

    .bg-bar-1 {
      left: 0;
    }

    .bg-bar-2 {
      left: 125px;
    }

    .bg-bar-3 {
      left: 250px;
    }

    /* Calendar Icon Button */
    .calendar-icon-button {
      position: absolute;
      left: 13.33%;
      right: 80.53%;
      top: calc(50% - 5px);
      transform: translateY(-50%);
      cursor: pointer;
      transition: opacity 0.2s;
    }

    .calendar-icon-button:hover {
      opacity: 0.7;
    }

    .calendar-icon-button svg {
      display: block;
      width: 100%;
      height: 100%;
    }

    .calendar-icon-button svg path {
      fill: #C7C7CC;
      transition: fill 0.3s ease;
    }

    .calendar-icon-button.active svg path {
      fill: #010101;
    }

    /* Profile Icon Button */
    .profile-icon-button {
      position: absolute;
      left: 79.47%;
      right: 13.33%;
      top: calc(50% - 5px);
      transform: translateY(-50%);
      cursor: pointer;
      transition: opacity 0.2s;
    }

    .profile-icon-button:hover {
      opacity: 0.7;
    }

    .profile-icon-button svg {
      display: block;
      width: 100%;
      height: 100%;
    }

    .profile-icon-button svg path {
      fill: #C7C7CC;
      transition: fill 0.3s ease;
    }

    .profile-icon-button.active svg path {
      fill: #010101;
    }

    /* Main Button */
    .main-icon-button {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 70px;
      height: 70px;
      top: -14px;
      cursor: pointer;
      padding: 0;
      border-radius: 50%;
      background-color: #5a5a5a;
      box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.25);
      transition: transform 0.2s, background-color 0.3s ease;
    }

    .main-icon-button:hover {
      transform: translateX(-50%) scale(1.05);
    }

    .main-icon-button.active {
      background-color: #010101;
    }

    .main-button-circle-container {
      display: none;
    }

    /* Main Icon */
    .main-icon {
      position: absolute;
      left: 50%;
      top: calc(50% - 6px);
      transform: translate(-50%, -50%);
      width: 26px;
      height: 24px;
      pointer-events: none;
    }

    .main-icon svg {
      display: block;
      width: 100%;
      height: 100%;
    }

    /* Labels */
    .label {
      position: absolute;
      font-size: 10px;
      font-weight: 600;
      letter-spacing: -0.1px;
      text-align: center;
      white-space: nowrap;
      line-height: 1.5;
      transform: translate(-50%, -50%);
      pointer-events: none;
      color: #C7C7CC;
      transition: color 0.3s ease;
    }

    .calendar-label {
      left: 62px;
      top: 43.5px;
    }

    .profile-label {
      left: 312.5px;
      top: 43.5px;
    }

    .main-label {
      left: 50%;
      top: 39.5px;
    }

    .calendar-icon-button.active ~ .calendar-label {
      color: #010101;
    }

    .profile-icon-button.active ~ .profile-label {
      color: #010101;
    }

    .main-icon-button.active ~ .main-label {
      color: white;
    }

    /* Hover effects */
    .calendar-icon-button:hover,
    .profile-icon-button:hover,
    .main-icon-button:hover {
      opacity: 0.8;
    }

    /* Details Panel */
    .details-panel {
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%) translateY(100%);
      max-width: 375px;
      width: 100%;
      background-color: white;
      border-top-left-radius: 30px;
      border-top-right-radius: 30px;
      box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.25);
      transition: transform 0.3s ease-out;
      z-index: 30;
    }

    .details-panel.visible {
      transform: translateX(-50%) translateY(0);
    }

    .panel-header {
      padding: 23px 24px 0;
      position: relative;
    }

    .panel-date-nav {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 60px;
      margin-bottom: 26px;
    }

    .panel-date-title {
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 16px;
      font-weight: 600;
      color: #000;
      letter-spacing: -0.4px;
      line-height: 1.5;
    }

    .panel-nav-button {
      width: 3.668px;
      height: 10.12px;
      border: none;
      background: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }

    .panel-work-hours {
      display: inline-block;
      color: white;
      padding: 4px 12px;
      border-radius: 12px;
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 14px;
      font-weight: 500;
      letter-spacing: -0.35px;
      line-height: 1.5;
      margin-top: 4px;
    }

    .panel-work-hours.work {
      background-color: #88b3f8;
    }

    .panel-work-hours.vacation {
      background-color: #ff9999;
    }

    .close-button {
      position: absolute;
      right: 24px;
      top: 24px;
      width: 24px;
      height: 24px;
      border: none;
      background: none;
      cursor: pointer;
      padding: 0;
    }

    .panel-content {
      padding: 0 24px 34px;
    }

    .info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap-x: 40px;
      gap-y: 21px;
      margin-bottom: 34px;
    }

    .info-item {
      grid-column: span 1;
    }

    .info-item.full-width {
      grid-column: span 2;
    }

    .info-label {
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 14px;
      color: #828282;
      margin-bottom: 7px;
      letter-spacing: -0.35px;
      line-height: 1.5;
    }

    .info-value {
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 14px;
      color: #000;
      letter-spacing: -0.35px;
      line-height: 1.5;
    }

    .edit-button {
      width: 100%;
      height: 40px;
      background-color: #000;
      color: white;
      border: none;
      border-radius: 8px;
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 14px;
      font-weight: 500;
      letter-spacing: -0.35px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .edit-button:hover {
      background-color: #333;
    }

    .empty-state {
      text-align: center;
      padding: 40px 0;
      color: #828282;
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 14px;
      letter-spacing: -0.35px;
      line-height: 1.5;
    }

    /* Edit Mode */
    .edit-mode {
      display: none;
      width: 100%;
      max-width: 375px;
      min-height: 100vh;
      background-color: white;
    }

    .edit-mode.active {
      display: flex;
      flex-direction: column;
    }

    .edit-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px;
      margin-bottom: 30px;
    }

    .back-button {
      width: 24px;
      height: 24px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .edit-title {
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 18px;
      font-weight: 600;
      color: #000;
    }

    .edit-form {
      padding: 0 24px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 14px;
      color: #828282;
      margin-bottom: 8px;
      letter-spacing: -0.35px;
      line-height: 1.5;
    }

    .form-input {
      width: 100%;
      height: 48px;
      padding: 0 16px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 14px;
      letter-spacing: -0.35px;
    }

    .form-select {
      width: 100%;
      height: 48px;
      padding: 0 16px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 14px;
      letter-spacing: -0.35px;
      background-color: white;
      cursor: pointer;
    }

    .form-textarea {
      width: 100%;
      min-height: 100px;
      padding: 12px 16px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 14px;
      letter-spacing: -0.35px;
      resize: vertical;
    }

    .save-button {
      width: 100%;
      height: 48px;
      background-color: #000;
      color: white;
      border: none;
      border-radius: 8px;
      font-family: 'Inter', 'Noto Sans KR', sans-serif;
      font-size: 16px;
      font-weight: 500;
      letter-spacing: -0.4px;
      cursor: pointer;
      margin-top: 24px;
      margin-bottom: 80px;
    }

    .save-button:hover {
      background-color: #333;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Main View -->
    <div id="mainView">
      <!-- Download Button -->
      <button class="download-button" onclick="handleDownload()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <rect width="24" height="24" fill="white"/>
          <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15M7 10L12 15M12 15L17 10M12 15V3" stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>

      <!-- Month Selector -->
      <div class="month-selector">
        <button class="month-button" id="monthButton" onclick="toggleDropdown()">
          <span class="month-text" id="monthText">2025년 11월</span>
          <svg width="15" height="7" viewBox="0 0 15 7" fill="none">
            <path d="M1 1L7.5 6L14 1" stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        
        <div class="dropdown-backdrop" id="dropdownBackdrop" onclick="closeDropdown()"></div>
        <div class="month-dropdown" id="monthDropdown">
          <!-- Dropdown items will be populated by JavaScript -->
        </div>
      </div>

      <!-- Calendar -->
      <div class="calendar">
        <!-- Weekdays -->
        <div class="calendar-weekdays">
          <div class="weekday sunday">일 </div>
          <div class="weekday">월</div>
          <div class="weekday">화</div>
          <div class="weekday">수</div>
          <div class="weekday">목</div>
          <div class="weekday">금</div>
          <div class="weekday saturday">토</div>
        </div>

        <!-- Calendar Grid -->
        <div class="calendar-grid" id="calendarGrid">
          <!-- Days will be populated by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Edit Mode -->
    <div id="editView" class="edit-mode">
      <div class="edit-header">
        <button class="back-button" onclick="handleBackFromEdit()">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
            <path d="M13 7H1M1 7L7 1M1 7L7 13" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <p class="edit-title" id="editDateTitle">11.10 (월)</p>
        <div style="width: 24px;"></div>
      </div>

      <div class="edit-form">
        <div class="form-group">
          <label class="form-label">휴가 (선택)</label>
          <select class="form-select" id="vacationType" onchange="handleVacationTypeChange()">
            <option value="">선택 안 함</option>
            <option value="연차">연차</option>
            <option value="대휴">대휴</option>
          </select>
        </div>

        <div class="form-group" id="startTimeGroup">
          <label class="form-label">시작 시간</label>
          <input type="time" class="form-input" id="startTime" value="09:00">
        </div>

        <div class="form-group" id="endTimeGroup">
          <label class="form-label">종료 시간</label>
          <input type="time" class="form-input" id="endTime" value="15:30">
        </div>

        <div class="form-group" id="breakTimeGroup">
          <label class="form-label">휴게 시간 (분)</label>
          <input type="number" class="form-input" id="breakTime" value="60">
        </div>

        <div class="form-group">
          <label class="form-label">메모</label>
          <textarea class="form-textarea" id="memo" placeholder="메모를 입력하세요">병원 예약 때문에 일찍 퇴근함</textarea>
        </div>

        <button class="save-button" onclick="handleSave()">저장하기</button>
      </div>
    </div>

    <!-- Details Panel -->
    <div id="detailsPanel" class="details-panel">
      <div class="panel-header">
        <div class="panel-date-nav">
          <button class="panel-nav-button" onclick="handlePrevDate()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M15 18L9 12L15 6" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <div style="text-align: center;">
            <p class="panel-date-title" id="panelDateTitle">11.10 (월)</p>
            <span class="panel-work-hours" id="panelWorkHours">5H 30M</span>
          </div>
          <button class="panel-nav-button" onclick="handleNextDate()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M9 18L15 12L9 6" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
        <button class="close-button" onclick="closePanel()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M18 6L6 18M6 6L18 18" stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>

      <div class="panel-content">
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">근무 시간</div>
            <div class="info-value" id="workTimeValue">09:00 - 15:30</div>
          </div>
          <div class="info-item">
            <div class="info-label">휴게 시간</div>
            <div class="info-value" id="breakTimeValue">60분</div>
          </div>
          <div class="info-item full-width">
            <div class="info-label">메모</div>
            <div class="info-value" id="memoValue">병원 예약 때문에 일찍 퇴근함</div>
          </div>
        </div>

        <button class="edit-button" onclick="handleEdit()">수정하기</button>
      </div>
    </div>
  </div>

  <!-- Navigation Buttons -->
  <div class="nav-container">
    <div class="nav-wrapper">
      <!-- Background bars -->
      <div class="bg-bar bg-bar-1"></div>
      <div class="bg-bar bg-bar-2"></div>
      <div class="bg-bar bg-bar-3"></div>

      <!-- Calendar Icon Button -->
      <div class="calendar-icon-button active" data-nav="calendar">
        <svg fill="none" viewBox="0 0 23 24" preserveAspectRatio="none">
          <path d="M6.41745 0C5.71333 0 5.14187 0.565895 5.14187 1.26316C2.32156 1.26316 0 3.528 0 6.31579V8.8421L0.0395505 18.9474C0.0395505 21.7339 2.32412 24 5.14187 24H17.8977C20.7154 24 23 21.7377 23 18.9474L22.9604 8.8421V6.31579C22.9604 3.52295 20.7129 1.26316 17.8977 1.26316C17.8977 0.565895 17.3275 0 16.6221 0C15.918 0 15.3465 0.565895 15.3465 1.26316H7.69303C7.69303 0.565895 7.12285 0 6.41745 0ZM5.14187 3.78947C5.14187 4.48674 5.71333 5.05263 6.41745 5.05263C7.12285 5.05263 7.69303 4.48674 7.69303 3.78947H15.3465C15.3465 4.48674 15.918 5.05263 16.6221 5.05263C17.3275 5.05263 17.8977 4.48674 17.8977 3.78947C19.297 3.78947 20.4093 4.91116 20.4093 6.31579V7.57895C17.9551 7.57895 5.00538 7.57895 2.55116 7.57895V6.31579C2.55116 4.93011 3.72343 3.78947 5.14187 3.78947ZM2.55116 10.1053C5.00538 10.1053 17.9551 10.1053 20.4093 10.1053L20.4488 18.9474C20.4488 20.3381 19.3072 21.4737 17.8977 21.4737H5.14187C3.73363 21.4737 2.59071 20.3432 2.59071 18.9474L2.55116 10.1053Z" />
        </svg>
      </div>

      <!-- Profile Icon Button -->
      <div class="profile-icon-button" data-nav="profile">
        <svg fill="none" viewBox="0 0 27 24" preserveAspectRatio="none">
          <path d="M18.225 0C14.8698 0 12.15 2.68667 12.15 6C12.15 9.31333 14.8698 12 18.225 12C21.5802 12 24.3 9.31333 24.3 6C24.3 2.68667 21.5802 0 18.225 0ZM8.1 1.33333C5.11772 1.33333 2.7 3.72133 2.7 6.66667C2.7 9.612 5.11772 12 8.1 12C9.21969 12 10.2803 11.6627 11.1796 11.0413C11.7908 10.62 11.9443 9.77067 11.5171 9.16667C11.09 8.56267 10.272 8.45334 9.66087 8.87467C9.21146 9.18534 8.66187 9.33333 8.1 9.33333C6.60879 9.33333 5.4 8.14 5.4 6.66667C5.4 5.19333 6.60879 4 8.1 4C8.54037 4 8.94321 4.09599 9.32337 4.29199C9.98487 4.63199 10.8356 4.40268 11.1796 3.74935C11.5237 3.09735 11.2505 2.25598 10.5891 1.91732C9.82624 1.52532 8.97669 1.33333 8.1 1.33333ZM18.225 2.66667C20.0889 2.66667 21.6 4.15867 21.6 6C21.6 7.84133 20.0889 9.33333 18.225 9.33333C16.3611 9.33333 14.85 7.84133 14.85 6C14.85 4.15867 16.3611 2.66667 18.225 2.66667ZM4.13438 13.792C1.65834 14.8013 0 17.2747 0 20V22.6667C0 23.4027 0.604395 24 1.35 24H6.75C7.49561 24 8.1 23.4027 8.1 22.6667C8.1 21.9307 7.49561 21.3333 6.75 21.3333H2.7V20C2.7 18.5013 3.60004 17.1254 4.63455 16.52C5.60749 16.9254 6.63674 17.232 7.55204 17.308C8.29508 17.3707 8.96508 16.8173 9.02813 16.0827C9.09117 15.3493 8.55428 14.728 7.81137 14.6654C7.21872 14.616 6.57099 14.44 5.82188 14.1253C5.64098 14.0493 5.53594 13.9893 5.18913 13.8333C4.84906 13.68 4.47971 13.6507 4.13438 13.792ZM13.5844 13.792C11.1083 14.8013 9.45 17.2747 9.45 20V22.6667C9.45 23.4027 10.0544 24 10.8 24H25.65C26.3956 24 27 23.4027 27 22.6667V20C27 17.3387 25.3325 14.9253 22.8656 13.8747C22.5184 13.7267 22.1138 13.7227 21.7688 13.8747C20.5743 14.404 19.4106 14.6667 18.225 14.6667C17.0435 14.6667 15.8757 14.3893 14.6391 13.8333C14.2991 13.68 13.9297 13.6507 13.5844 13.792ZM14.1034 16.52C15.3789 16.9974 16.9167 17.3333 18.225 17.3333C19.523 17.3333 20.9972 17.02 22.2469 16.564C23.4654 17.2493 24.3 18.532 24.3 20V21.3333H12.15V20C12.15 18.4467 13.0355 17.1374 14.1034 16.52Z" />
        </svg>
      </div>

      <!-- Main Button -->
      <div class="main-icon-button" data-nav="main">
        <div class="main-button-circle-container">
          <svg fill="none" viewBox="0 0 112 112" preserveAspectRatio="none">
            <defs>
              <filter colorInterpolationFilters="sRGB" filterUnits="userSpaceOnUse" height="112" id="filter0_d_1_29" width="112" x="0" y="0">
                <feFlood floodOpacity="0" result="BackgroundImageFix" />
                <feColorMatrix in="SourceAlpha" result="hardAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                <feMorphology in="SourceAlpha" operator="dilate" radius="1" result="effect1_dropShadow_1_29" />
                <feOffset />
                <feGaussianBlur stdDeviation="10" />
                <feComposite in2="hardAlpha" operator="out" />
                <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                <feBlend in2="BackgroundImageFix" mode="normal" result="effect1_dropShadow_1_29" />
                <feBlend in="SourceGraphic" in2="effect1_dropShadow_1_29" mode="normal" result="shape" />
              </filter>
            </defs>
            <g filter="url(#filter0_d_1_29)">
              <circle cx="56" cy="56" fill="#010101" r="35" />
            </g>
          </svg>
        </div>
        <!-- Main Icon (briefcase) -->
        <div class="main-icon">
          <svg fill="none" viewBox="0 0 26 24" preserveAspectRatio="none">
            <path d="M11.7 0C8.82817 0 6.5 2.388 6.5 5.33333H5.2C2.32817 5.33333 0 7.72133 0 10.6667V18.6667C0 21.612 2.32817 24 5.2 24H20.8C23.6718 24 26 21.612 26 18.6667V10.6667C26 7.72133 23.6718 5.33333 20.8 5.33333H19.5C19.5 2.388 17.1718 0 14.3 0H11.7ZM11.7 2.66667H14.3C15.736 2.66667 16.9 3.86 16.9 5.33333H9.1C9.1 3.86 10.264 2.66667 11.7 2.66667ZM5.2 8H20.8C22.236 8 23.4 9.19333 23.4 10.6667V11.0413L16.4531 13.416C14.5876 14.0547 11.4124 14.0547 9.54694 13.416L2.6 11.0413V10.6667C2.6 9.19333 3.76402 8 5.2 8ZM2.6 13.8333L8.73444 15.9587C11.1336 16.7787 14.8664 16.7787 17.2656 15.9587L23.4 13.8333V18.6667C23.4 20.14 22.236 21.3333 20.8 21.3333H5.2C3.76402 21.3333 2.6 20.14 2.6 18.6667V13.8333Z" fill="white" />
          </svg>
        </div>
      </div>

      <!-- Labels -->
      <div class="label calendar-label">Calendar</div>
      <div class="label profile-label">Profile</div>
      <div class="label main-label">Main</div>
    </div>
  </div>

  <script>
    // State
    let currentYear = 2025;
    let currentMonth = 11;
    let selectedDate = 10;
    let isPanelVisible = true;
    let isDropdownOpen = false;
    let activeNav = 'calendar'; // Navigation state

    // Work data
    const workData = {
      '2025-11-4': '8H',
      '2025-11-5': '8H',
      '2025-11-6': '8H',
      '2025-11-7': '8H',
      '2025-11-10': '5H 30M',
      '2025-11-11': '연차',
    };

    // Initialize
    function init() {
      populateMonthDropdown();
      renderCalendar();
      updatePanel();
      if (isPanelVisible) {
        showPanel();
      }
    }

    // Populate month dropdown
    function populateMonthDropdown() {
      const dropdown = document.getElementById('monthDropdown');
      const months = [
        { year: 2024, month: 10, label: '2024년 10월' },
        { year: 2024, month: 11, label: '2024년 11월' },
        { year: 2024, month: 12, label: '2024년 12월' },
        { year: 2025, month: 1, label: '2025년 1월' },
        { year: 2025, month: 2, label: '2025년 2월' },
        { year: 2025, month: 3, label: '2025년 3월' },
        { year: 2025, month: 4, label: '2025년 4월' },
        { year: 2025, month: 5, label: '2025년 5월' },
        { year: 2025, month: 6, label: '2025년 6월' },
        { year: 2025, month: 7, label: '2025년 7월' },
        { year: 2025, month: 8, label: '2025년 8월' },
        { year: 2025, month: 9, label: '2025년 9월' },
        { year: 2025, month: 10, label: '2025년 10월' },
        { year: 2025, month: 11, label: '2025년 11월' },
        { year: 2025, month: 12, label: '2025년 12월' },
        { year: 2026, month: 1, label: '2026년 1월' },
        { year: 2026, month: 2, label: '2026년 2월' },
        { year: 2026, month: 3, label: '2026년 3월' },
      ];

      dropdown.innerHTML = '';
      months.forEach(item => {
        const button = document.createElement('button');
        button.className = 'month-dropdown-item';
        if (item.year === currentYear && item.month === currentMonth) {
          button.classList.add('selected');
        }
        button.textContent = item.label;
        button.onclick = () => handleMonthSelect(item.year, item.month);
        dropdown.appendChild(button);
      });
    }

    // Toggle dropdown
    function toggleDropdown() {
      isDropdownOpen = !isDropdownOpen;
      const dropdown = document.getElementById('monthDropdown');
      const backdrop = document.getElementById('dropdownBackdrop');
      
      if (isDropdownOpen) {
        dropdown.classList.add('visible');
        backdrop.classList.add('visible');
      } else {
        dropdown.classList.remove('visible');
        backdrop.classList.remove('visible');
      }
    }

    // Close dropdown
    function closeDropdown() {
      isDropdownOpen = false;
      document.getElementById('monthDropdown').classList.remove('visible');
      document.getElementById('dropdownBackdrop').classList.remove('visible');
    }

    // Handle month select
    function handleMonthSelect(year, month) {
      currentYear = year;
      currentMonth = month;
      selectedDate = null;
      isPanelVisible = false;
      closeDropdown();
      populateMonthDropdown();
      renderCalendar();
      hidePanel();
    }

    // Render calendar
    function renderCalendar() {
      const grid = document.getElementById('calendarGrid');
      grid.innerHTML = '';

      const firstDay = new Date(currentYear, currentMonth - 1, 1).getDay();
      const daysInMonth = new Date(currentYear, currentMonth, 0).getDate();
      const prevMonthDays = new Date(currentYear, currentMonth - 1, 0).getDate();

      // Add days from previous month
      for (let i = firstDay - 1; i >= 0; i--) {
        const dayCell = document.createElement('div');
        dayCell.className = 'calendar-day disabled';
        
        const dayNumber = document.createElement('div');
        dayNumber.className = 'day-number';
        dayNumber.style.color = '#bdbdbd';
        dayNumber.textContent = prevMonthDays - i;
        dayCell.appendChild(dayNumber);
        
        grid.appendChild(dayCell);
      }

      // Add days of current month
      for (let day = 1; day <= daysInMonth; day++) {
        const dayCell = document.createElement('div');
        const dayOfWeek = new Date(currentYear, currentMonth - 1, day).getDay();
        const workDataKey = `${currentYear}-${currentMonth}-${day}`;
        const workHours = workData[workDataKey];
        
        // 일본 공휴일: 11월 3일 (문화의 날), 11월 24일 (근로감사의 날)
        const isHoliday = (currentYear === 2025 && currentMonth === 11 && (day === 3 || day === 24));
        
        dayCell.className = 'calendar-day';
        if (dayOfWeek === 0) dayCell.classList.add('sunday');
        if (dayOfWeek === 6) dayCell.classList.add('saturday');
        if (isHoliday) dayCell.classList.add('holiday');
        if (day === selectedDate && workHours) dayCell.classList.add('selected');

        const dayNumber = document.createElement('div');
        dayNumber.className = 'day-number';
        dayNumber.textContent = day;
        
        // 공휴일은 일요일과 같은 빨간색으로 표시
        if (isHoliday) {
          dayNumber.style.color = '#eb4335';
        }
        
        dayCell.appendChild(dayNumber);

        if (workHours) {
          const badge = document.createElement('div');
          // 연차나 대휴인 경우 빨간색 배지, 아니면 파란색 배지
          badge.className = (workHours === '연차' || workHours === '대휴') ? 'vacation-badge' : 'work-badge';
          badge.textContent = workHours;
          dayCell.appendChild(badge);
        }
        
        // 모든 현재 달의 날짜에 클릭 이벤트 추가
        dayCell.onclick = () => handleDateClick(day);

        grid.appendChild(dayCell);
      }

      // Add days from next month
      const totalCells = firstDay + daysInMonth;
      const remainingCells = totalCells % 7 === 0 ? 0 : 7 - (totalCells % 7);
      
      for (let i = 1; i <= remainingCells; i++) {
        const dayCell = document.createElement('div');
        dayCell.className = 'calendar-day disabled';
        
        const dayNumber = document.createElement('div');
        dayNumber.className = 'day-number';
        dayNumber.style.color = '#bdbdbd';
        dayNumber.textContent = i;
        dayCell.appendChild(dayNumber);
        
        grid.appendChild(dayCell);
      }

      // Update month text
      document.getElementById('monthText').textContent = `${currentYear}년 ${currentMonth}월`;
    }

    // Handle date click
    function handleDateClick(day) {
      selectedDate = day;
      isPanelVisible = true;
      renderCalendar();
      updatePanel();
      showPanel();
    }

    // Update panel
    function updatePanel() {
      const workDataKey = `${currentYear}-${currentMonth}-${selectedDate}`;
      const workHours = workData[workDataKey];

      // Format date
      const dateNum = parseInt(selectedDate);
      const dateObj = new Date(currentYear, currentMonth - 1, dateNum);
      const dayNames = ['일', '월', '화', '수', '목', '금', '토'];
      const dayOfWeek = dayNames[dateObj.getDay()];
      const formatted = `${currentMonth}.${dateNum.toString().padStart(2, '0')} (${dayOfWeek})`;

      document.getElementById('panelDateTitle').textContent = formatted;
      
      const panelWorkHoursElem = document.getElementById('panelWorkHours');
      const infoGrid = document.querySelector('.info-grid');
      const panelContent = document.querySelector('.panel-content');
      
      if (!workHours) {
        // 빈 상태: 출퇴근 기록이 없는 경우
        panelWorkHoursElem.style.display = 'none';
        infoGrid.innerHTML = '<div class="empty-state">입력하신 출퇴근 기록이 없습니다.</div>';
        infoGrid.style.display = 'block';
        infoGrid.style.gridTemplateColumns = '1fr';
        return;
      }

      // workHours가 있는 경우
      panelWorkHoursElem.style.display = 'inline-block';
      panelWorkHoursElem.textContent = workHours;
      infoGrid.style.gridTemplateColumns = '1fr 1fr';
      
      // 연차나 대휴인 경우 빨간색 배지, 아니면 파란색 배지
      const isVacation = (workHours === '연차' || workHours === '대휴');
      panelWorkHoursElem.className = isVacation ? 'panel-work-hours vacation' : 'panel-work-hours work';
      
      // info-grid 내용 재생성
      if (isVacation) {
        // 연차나 대휴인 경우: 메모만 표시
        infoGrid.innerHTML = `
          <div class="info-item full-width">
            <div class="info-label">메모</div>
            <div class="info-value" id="memoValue">${workHours === '연차' ? '연차 사용' : '대휴 사용'}</div>
          </div>
        `;
      } else {
        // 일반 근무인 경우: 모든 정보 표시
        const is8Hours = workHours === '8H';
        infoGrid.innerHTML = `
          <div class="info-item">
            <div class="info-label">근무 시간</div>
            <div class="info-value" id="workTimeValue">${is8Hours ? '09:00 - 18:00' : '09:00 - 15:30'}</div>
          </div>
          <div class="info-item">
            <div class="info-label">휴게 시간</div>
            <div class="info-value" id="breakTimeValue">60분</div>
          </div>
          <div class="info-item full-width">
            <div class="info-label">메모</div>
            <div class="info-value" id="memoValue">${is8Hours ? '' : '병원 예약 때문에 일찍 퇴근함'}</div>
          </div>
        `;
      }
    }

    // Show/hide panel
    function showPanel() {
      document.getElementById('detailsPanel').classList.add('visible');
    }

    function hidePanel() {
      document.getElementById('detailsPanel').classList.remove('visible');
    }

    function closePanel() {
      isPanelVisible = false;
      selectedDate = null;
      hidePanel();
      renderCalendar();
    }

    // Navigate dates in panel
    function handlePrevDate() {
      if (!selectedDate) return;
      
      let newDate = selectedDate - 1;
      const daysInMonth = new Date(currentYear, currentMonth, 0).getDate();
      
      while (newDate >= 1) {
        const workDataKey = `${currentYear}-${currentMonth}-${newDate}`;
        if (workData[workDataKey]) {
          selectedDate = newDate;
          renderCalendar();
          updatePanel();
          return;
        }
        newDate--;
      }
    }

    function handleNextDate() {
      if (!selectedDate) return;
      
      const daysInMonth = new Date(currentYear, currentMonth, 0).getDate();
      let newDate = selectedDate + 1;
      
      while (newDate <= daysInMonth) {
        const workDataKey = `${currentYear}-${currentMonth}-${newDate}`;
        if (workData[workDataKey]) {
          selectedDate = newDate;
          renderCalendar();
          updatePanel();
          return;
        }
        newDate++;
      }
    }



    // Handle edit
    function handleEdit() {
      // Update edit page date title
      const dateNum = parseInt(selectedDate);
      const dateObj = new Date(currentYear, currentMonth - 1, dateNum);
      const dayNames = ['일', '월', '화', '수', '목', '금', '토'];
      const dayOfWeek = dayNames[dateObj.getDay()];
      const formatted = `${currentMonth}.${dateNum.toString().padStart(2, '0')} (${dayOfWeek})`;
      document.getElementById('editDateTitle').textContent = formatted;
      
      // 현재 날짜의 workData 확인하여 휴가 타입 설정
      const workDataKey = `${currentYear}-${currentMonth}-${selectedDate}`;
      const workHours = workData[workDataKey];
      
      const vacationTypeSelect = document.getElementById('vacationType');
      if (workHours === '연차' || workHours === '대휴') {
        vacationTypeSelect.value = workHours;
        handleVacationTypeChange();
      } else {
        vacationTypeSelect.value = '';
        handleVacationTypeChange();
      }
      
      document.getElementById('mainView').classList.add('hidden');
      document.getElementById('editView').classList.add('active');
      hidePanel();
    }

    function handleVacationTypeChange() {
      const vacationType = document.getElementById('vacationType').value;
      const startTimeGroup = document.getElementById('startTimeGroup');
      const endTimeGroup = document.getElementById('endTimeGroup');
      const breakTimeGroup = document.getElementById('breakTimeGroup');
      
      if (vacationType === '연차' || vacationType === '대휴') {
        // 휴가를 선택한 경우 시간 관련 항목 숨기기
        startTimeGroup.style.display = 'none';
        endTimeGroup.style.display = 'none';
        breakTimeGroup.style.display = 'none';
      } else {
        // 선택 안 함인 경우 시간 관련 항목 보이기
        startTimeGroup.style.display = 'block';
        endTimeGroup.style.display = 'block';
        breakTimeGroup.style.display = 'block';
      }
    }

    function handleBackFromEdit() {
      document.getElementById('mainView').classList.remove('hidden');
      document.getElementById('editView').classList.remove('active');
      if (isPanelVisible && selectedDate) {
        showPanel();
      }
    }

    function handleSave() {
      const startTime = document.getElementById('startTime').value;
      const endTime = document.getElementById('endTime').value;
      const breakTime = document.getElementById('breakTime').value;
      const memo = document.getElementById('memo').value;

      console.log('Saved:', { startTime, endTime, breakTime, memo });
      handleBackFromEdit();
    }

    // Handle download
    function handleDownload() {
      console.log('Download button clicked');
      // Add your download logic here
    }

    // Navigation elements
    const navButtons = document.querySelectorAll('[data-nav]');

    // Navigation tabs
    navButtons.forEach(button => {
      button.addEventListener('click', function() {
        const navType = this.getAttribute('data-nav');
        
        // 모든 버튼의 active 클래스 제거
        navButtons.forEach(btn => btn.classList.remove('active'));
        
        // 클릭한 버튼에 active 클래스 추가
        this.classList.add('active');
        
        activeNav = navType;
        console.log(`${navType} 버튼이 선택되었습니다.`);
      });
    });

    // Initialize on load
    window.addEventListener('DOMContentLoaded', () => {
      init();
    });
  </script>
</body>
</html>