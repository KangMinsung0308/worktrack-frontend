<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>출퇴근 기록 테스트</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 40px auto;
      padding: 0 20px;
      background-color: #f7f7f7;
    }

    h1 { text-align: center; color: #333; }
    h2 { color: #555; margin-top: 30px; }

    form, .container {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-top: 20px;
    }

    label {
      display: block;
      margin-bottom: 10px;
      color: #333;
    }

    input[type="text"], input[type="date"], input[type="time"], input[type="number"] {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 4px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }

    button {
      padding: 10px 20px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 15px;
    }

    button:hover { background-color: #45a049; }

    pre {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      white-space: pre-wrap;
      word-wrap: break-word;
    }
  </style>
</head>
<body>

    <!-- POST: 출퇴근 기록 저장 -->
    <div class="container">
        <h2>출퇴근 기록</h2>
        <label>사용자 ID: <input type="number" id="postUserId" value="1"></label>
        <label>날짜: <input type="date" id="postWorkDate" value="2025-11-01"></label>
        <label>출근 시간: <input type="time" id="postStartTime" value="08:00"></label>
        <label>퇴근 시간: <input type="time" id="postEndTime" value="17:00"></label>
        <label>근무시간: <input type="number" id="postTotalHours" value="8"></label>
        <label>잔업: <input type="number" id="postOvertime" value="0"></label>
        <button id="saveData">저장</button>
        <pre id="postOutput">결과가 여기에 표시됩니다.</pre>
    </div>

    <!-- GET: 출퇴근 기록 조회 -->
    <div class="container">
        <h2>출퇴근 기록 조회</h2>
        <label>사용자 ID: <input type="number" id="getUserId" value="1"></label>
        <label>날짜: <input type="date" id="getWorkDate" value="2025-11-01"></label>
        <button id="loadData">불러오기</button>
        <pre id="getOutput">결과가 여기에 표시됩니다.</pre>
    </div>

<script>
const apiUrl = "http://localhost:8080/worktime";

// POST: 기록 저장
document.getElementById("saveData").addEventListener("click", function() {
    const data = {
        userId: parseInt(document.getElementById("postUserId").value),
        workDate: document.getElementById("postWorkDate").value,
        startTime: document.getElementById("postWorkDate").value + "T" + document.getElementById("postStartTime").value,
        endTime: document.getElementById("postWorkDate").value + "T" + document.getElementById("postEndTime").value,
        totalHours: parseFloat(document.getElementById("postTotalHours").value),
        overtime: parseFloat(document.getElementById("postOvertime").value)
    };

    fetch(`${apiUrl}/record`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    })
    .then(res => res.text())
    .then(msg => {
        document.getElementById("postOutput").textContent = msg;
    })
    .catch(err => alert("저장 오류: " + err));
});

// GET: 기록 조회
document.getElementById("loadData").addEventListener("click", function() {
    const userId = parseInt(document.getElementById("getUserId").value);
    const workDate = document.getElementById("getWorkDate").value;

    fetch(`${apiUrl}/${userId}?workDate=${workDate}`)
        .then(res => res.json())
        .then(data => {
            document.getElementById("getOutput").textContent = JSON.stringify(data, null, 2);
        })
        .catch(err => alert("조회 오류: " + err));
});
</script>

</body>
</html>
